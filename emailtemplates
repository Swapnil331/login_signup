var payload = new { PanNumber = Encpan, Fund = FundValue, SecurityKey = DynamicSecurityKey }; WriteLog("DashBoard", Encpan + " " + FundValue); var jsonPayload = JsonConvert.SerializeObject(payload); using (HttpClient httpClient = new HttpClient()) { string apiUrl = "http://localhost:44376/api/WebKiosk/GetPortfolio"; var content = new StringContent(jsonPayload, Encoding.UTF8, "application/json"); HttpResponseMessage response = await httpClient.PostAsync(apiUrl, content); if (response.IsSuccessStatusCode) { /*var responseData = await response.Content.ReadAsAsync<dynamic>(); return Content(responseData);*/ var responseData = await response.Content.ReadAsAsync<DataSet>(); Session["UserDataSet"] = responseData; var res = new InvestmentDetails { InvName = responseData.Tables[1].Rows[0]["Invname"]?.ToString(), Singleusercnt = Convert.ToInt32(responseData.Tables[1].Rows[0]["Singlerusercnt"]), Anyoneorsurvcnt = Convert.ToInt32(responseData.Tables[1].Rows[0]["Anyoneorsurvcnt"]), Jointholdercnt = Convert.ToInt32(responseData.Tables[1].Rows[0]["jointholdercnt"]) };
